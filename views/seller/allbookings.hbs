<section>
    <div>
        <h2 class="text-center m-5"> Manage bookings</h2>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-md-12 mt-4">
                {{#if driverupdateresponsemessage}}
                <div class="alert alert-succes"
                    style="color:{{driverupdateresponsemessage.color}};background-color:{{driverupdateresponsemessage.backgroundcolor}}">
                    <strong>{{driverupdateresponsemessage.type}}</strong> {{driverupdateresponsemessage.message}}
                </div>
                {{/if}}
                {{#if driverdeleteresponsemessage}}
                <div class="alert alert-succes"
                    style="color:{{driverdeleteresponsemessage.color}};background-color:{{driverdeleteresponsemessage.backgroundcolor}}">
                    <strong>{{driverdeleteresponsemessage.type}}</strong> {{driverdeleteresponsemessage.message}}
                </div>
                {{/if}}
                <table class="table"  id="table_id" style=" background-color: #fff; box-shadow: 3px 1px 7px 1px #888888;">
                    <thead style="background-color: #4e73df; color: white;">
                        <tr>
                            <th scope="col">Id</th>
                            <th scope="col" >User Name</th>
                            <th scope="col">Vehicle name</th>
                            <th scope="col">From date</th>
                            <th scope="col">To date</th>
                            <th scope="col">Message</th>
                            <th scope="col">Status</th>
                            <th scope="col">Booking date</th>
                            <th scope="col">Action</th>
                        </tr>
                    </thead>
                    {{#each allbookings}}
                    <tbody>
                        <tr>
                            <td class="text-uppercase ">{{this._id}}</td>
                            <td class="text-uppercase ">{{this.user.name}}</td>
                            <td class="text-uppercase ">{{this.vehicle.vehiclename}}</td>
                            <td class="text-uppercase ">{{this.fromdate}}</td>
                            <td class="text-uppercase ">{{this.todate}}</td>
                            <td class="text-uppercase ">{{this.message}}</td>
                            <td class="text-uppercase ">{{this.status}}</td>
                            <td class="text-uppercase ">{{this.bookingDate}}</td>

                            <td style="width: 144px; color: white;"> <a href="/seller/edit-driver/{{this._id}}"
                                    style="font-size: 14px;" class="btn btn-info">Edit</a>
                                <a class="btn btn-danger"
                                    onclick="if(confirm('Are you want to delete {{this.drivername}} ?')) deleteDriver('{{this._id}}')"
                                    style="font-size: 14px;">Delete</a>
                            </td>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>


            </div>
        </div>
    </div>
</section>

<style>
    tr:hover {
        box-shadow: 1px 0px 22px -1px #888888;

    }
</style>

<script>
    function deleteDriver(driverId) {
        $.ajax({
            url: '/seller/deletDriver/' + driverId,
            method: 'get',
            success: (response) => {
                if (response.status) {
                    alert('Driver deleted successfully')
                    location.reload()
                }
            }
        })
    }

    $(document).ready(function () {
        $('#table_id').DataTable();
    });
</script>